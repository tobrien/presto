

<!DOCTYPE html>



<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1.1. Presto Concepts &mdash; Presto 0.56-SNAPSHOT Documentation</title>
    
    <link rel="stylesheet" href="../_static/presto.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.56-SNAPSHOT',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Presto 0.56-SNAPSHOT Documentation" href="../index.html" />
    <link rel="up" title="1. Overview" href="../overview.html" />
    <link rel="next" title="1.2. Architecture" href="architecture.html" />
    <link rel="prev" title="1. Overview" href="../overview.html" />
    <meta name='viewport' content='width=device-width'>
    <meta property='og:type' content='website' />
    <meta property='og:title' content='Presto | A Distributed SQL Query Engine for Big Data' />
    <meta property='og:image' content='../_static/presto_og.png' />
    <meta property='og:description' content='A Distributed SQL Query Engine for Big Data' />

  </head>
  <body>
<header class='topbar clearfix'>
  <nav class='width'>
    <h1>Presto</h1>
  </nav>
</header>

<header class='hero clearfix'>
    <div class="width">
        <h1>Presto 0.56-SNAPSHOT Documentation</h1>
    </div>
</header>
<div class="topnav width">
    
<p class="nav">
    <span class="left">
        &laquo; <a href="../overview.html">1. Overview</a>
    </span>
    <span class="right">
        <a href="architecture.html">1.2. Architecture</a> &raquo;
    </span>
</p>

</div>
<div class="content width">
    
  <div class="section" id="presto-concepts">
<h1>1.1. Presto Concepts</h1>
<p>To understand Presto you first have to understand the terms used
through the Presto documentation.  This section was written to provide
a solid definition for the core concepts referenced throughout Presto.</p>
<div class="section" id="statement">
<h2>Statement</h2>
<p>Presto executes ANSI-compatible SQL statements.  When Presto document
refers to a statement we are refering to statement as defined in the
ANSI SQL standard which consists of clauses, expressions, and
predicates.</p>
</div>
<div class="section" id="query">
<h2>Query</h2>
<p>When Presto parses a statement it converts it into a query and creates
a distributed query plan which is then realized as a series of
interconnected stages running on Presto Workers.</p>
</div>
<div class="section" id="coordinator">
<h2>Coordinator</h2>
<p>The Presto coordinator is responsible for parsing statements, plannign
queries, and managing Presto work nodes.  It is the intelligence in a
Presto installation and it also the node to which a client connects to
submit statemetns for execution.</p>
</div>
<div class="section" id="worker">
<h2>Worker</h2>
<p>A Presto Worker is a node in a Presto installation which is
responsible for executing a stage and processing splits. Workers nodes
consume data and produce results for either other workers involved in
the same query or a coordinator acting as a go-between for a Presto
client.</p>
</div>
<div class="section" id="catalog">
<h2>Catalog</h2>
<p>A Presto Catalog is related to a connector to a specific type of data
source.  For example, the JMX catalog is a built-in catalog in Presto
which provides access to JMX information via a JMX connector.  When
you run a SQL statement in Presto, you are running it against a
catalog.  Other examples of catalogs include the hive catalog to
connect to a Hive data source.</p>
<p>Catalogs are defined in properties files stored in the Presto
configuration directory, and they correspond to technologies.</p>
</div>
<div class="section" id="connector">
<h2>Connector</h2>
<p>A catalog is associated with a connector.  You can think of a
connector the same way you would think of a driver. It is an
implementation of Presto&#8217;s SPI which let&#8217;s Presto interact with a
resource using a well-defined API. Presto contains several built-in
connectors including a connector for JMX, a &#8220;system&#8221; connector which
provides access to built-in system tables, and a &#8220;dual&#8221; connector
which is used as a placeholder.</p>
<p>If you examine a catalog configuration file, you will see that each
contains a mandatory property &#8220;connector.name&#8221; which is used by the
Catalog manager to create a connector for a given catalog.</p>
</div>
<div class="section" id="schema">
<h2>Schema</h2>
<p>A Catalog and Schema together define a set of tables that can be
queried.  When accessing Hive or a relational database with Presto, a
schema refers to the same concept in the target database.  When
accessing a catalog such as JMX, schema simply refers to a set of
tables used to represent JMX information and does not directly
correspond to a similar concept in the underlying technology.</p>
</div>
<div class="section" id="stage">
<h2>Stage</h2>
<p>When Presto executes a statement it does do by breaking up the
execution into a hierarchy of stages.  For example, if Presto needs to
aggregate data from one billion rows stored in Hive it does so by
creating a root stage to aggregate the output of several other stages
all of which are designed to operate on specific portions of that data
set.  What differentiates Presto from Hive is that this processing is
being done in parallel and intermediate output between stages is
stored in memory and retrieved from a parent stage.</p>
<p>As mentioned previously, every query in Presto is executed on a
hierarchy of stages which resembles a tree.  Every query has a &#8220;root&#8221;
stage which is responsible for aggregating the output from other
stages executing on a network of Presto workers.</p>
<p>Stages can be in number of different states captured in the following
list:</p>
<ul class="simple">
<li>Planned</li>
<li>Scheduling</li>
<li>Scheduled</li>
<li>Running</li>
<li>Finished</li>
<li>Canceled</li>
<li>Failed</li>
</ul>
<p>Stages have input positions and output positions they contain tasks
which assemble operators together and drivers which drive input in the
form of splits to these operators.  If it helps to imagine it as such
a Stage can be thought of a preconfigure &#8220;machine&#8221; that accepts inputs
and then drives outputs to other stages higher in a tree of stages.
The top-most stage in this tree is responsible for aggregating the
results of other stages and delivering them to the client.</p>
</div>
<div class="section" id="task">
<h2>Task</h2>
<p>A Presto tasks has inputs and outputs and it contains a series of
operators.  Tasks are the &#8220;work horse&#8221; in the Presto architecture as a
distributed query plan is deconstructed into a series of tasks run on
distributed stages which assemble the operators that act upon splits.</p>
</div>
<div class="section" id="operator">
<h2>Operator</h2>
<p>An Operator in Presto encapsulates the functionality of functions and
other operations which take data as input and generate data as output.
Operators execute within the context of a task, as a task is simply an
assembly if different operators which are then applied to individual
pieces of data within a split.</p>
<p>One of the most critical features of Presto that allows it process
data so quickly is that several operators have been implemented as JVM
bytecode</p>
</div>
<div class="section" id="driver">
<h2>Driver</h2>
<p>A Driver is a low-level object responsible for driving input
to a stage.  Think of a driver as a component that is keeping an eye
on a task in a Stage. Once this tasks needs more input, it is the
driver&#8217;s responsibility to drive input (in the form of splits) to
operators in a task.</p>
</div>
<div class="section" id="split">
<h2>Split</h2>
<p>Stages operate on splits, and splits are portions of a larger data
set. Take the following as an example, if you are attempting to
aggregate several billion rows from Hive, Presto will create a
hierarchy of stages and begin to disribute chunks of data to each
stage.  These chunks of data are known as splits and each stage is
responsible for retrieving one or more splits from an underlying data
source.</p>
</div>
</div>


</div>
<div class="bottomnav width">
    
<p class="nav">
    <span class="left">
        &laquo; <a href="../overview.html">1. Overview</a>
    </span>
    <span class="right">
        <a href="architecture.html">1.2. Architecture</a> &raquo;
    </span>
</p>

</div>

    <div class="footer">
        &copy; Copyright 2013, Facebook.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>